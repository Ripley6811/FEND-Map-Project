/*! frontend-nanodegree-map-project 2015-01-14 */
var app=app||{};app.addMap=function(){"use strict";var a=document.createElement("div");a.id="map-canvas",a.style.backgroundColor="#fb4",a.style.width="100%",a.style.minHeight="100%",document.querySelector("body").appendChild(a);var b={center:new google.maps.LatLng(22.735281,120.333368),zoom:14,mapTypeId:google.maps.MapTypeId.ROADMAP};app.map=new google.maps.Map(a,b);for(var c=0;c<app.features.length;c++)app.addMapMarker(app.features[c]);app.getPhotoList(app.addPhotoMarkers)},document.addEventListener("DOMContentLoaded",app.addMap),app.addPhotoMarkers=function(a){for(var b=0;b<a.length;b++)app.getPhotoGeo(a[b],function(a){a.icon="icons/photo.png",app.addMapMarker(a)})},app.addMapMarker=function(a){{var b=a.position;new google.maps.Marker({position:new google.maps.LatLng(b.lat,b.lon),map:app.map,title:a.title,icon:a.icon,animation:google.maps.Animation.DROP})}};var app=app||{};app.features=[{title:"Archery range",position:{lat:22.734471,lon:120.333068},icon:"icons/archery.png"},{title:"Jogging in the park",position:{lat:22.731795,lon:120.316772},icon:"icons/jogging.png"},{title:"Mountain hiking",position:{lat:22.725501,lon:120.370888},icon:"icons/hiking.png"},{title:"Swimming pool",position:{lat:22.733508,lon:120.331715},icon:"icons/swimming.png"},{title:"Bicycle maintenance",position:{lat:22.731711,lon:120.32952},icon:"icons/cycling.png"}];var app=app||{};app.getPhotoList=function(a){"use strict";var b=new XMLHttpRequest;b.onreadystatechange=function(){if(4===b.readyState&&200===b.status){var c=JSON.parse(b.response);"ok"===c.stat?a(c.photos.photo):console.log("ERROR in app.getPhotoList: "+c.message)}};var c=["method=flickr.people.getPublicPhotos","api_key=e224e71bda1508efe89de86b3b30ed9f","user_id=91602303%40N03","per_page=500","format=json","nojsoncallback=1"];b.open("GET","https://api.flickr.com/services/rest/?"+c.join("&"),!0),b.send()},app.getPhotoGeo=function(a,b){"use strict";var c=new XMLHttpRequest;c.onreadystatechange=function(){if(4===c.readyState&&200===c.status){var d=JSON.parse(c.response);"ok"===d.stat?(a.position={lat:d.photo.location.latitude,lon:d.photo.location.longitude},b(a)):console.log("ERROR in app.getPhotoGeo: "+d.message)}};var d=["method=flickr.photos.geo.getLocation","api_key=e224e71bda1508efe89de86b3b30ed9f","photo_id="+a.id,"format=json","nojsoncallback=1"];c.open("GET","https://api.flickr.com/services/rest/?"+d.join("&"),!0),c.send()};